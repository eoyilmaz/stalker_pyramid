<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN'
        'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en'
      xmlns:tal='http://xml.zope.org/namespaces/tal'>
<head>
  <title>Stalker v{{stalker.__version__}}</title>
  <meta charset='utf-8'>
  <meta http-equiv='Content-Type' content='text/html;charset=UTF-8'/>
  <meta name='keywords' content='python web application'/>
  <meta name='description' content='pyramid web application'/>
  <link rel='shortcut icon'
        href='{{request.static_url("stalker:static/images/favicon.ico")}}'/>
  <link rel='stylesheet' type='text/css' media='screen' charset='utf-8'
        href='{{request.static_url("stalker:static/css/stalker.css")}}'/>
  <link rel='stylesheet' type='text/css' media='screen' charset='utf-8'
        href='{{ request.static_url("stalker:static/js/dojo-release-1.8.1/dijit/themes/claro/claro.css") }}'/>
  <link rel='stylesheet' type='text/css' media='screen' charset='utf-8'
        href='{{ request.static_url("stalker:static/js/dojo-release-1.8.1/dojox/grid/resources/claroGrid.css") }}'/>
  <script type='text/javascript' data-dojo-config='async: true' 
          src='{{ request.static_url("stalker:static/js/dojo-release-1.8.1/dojo/dojo.js") }}'>
  </script>
  <script type='text/javascript'
          src='{{ request.static_url("stalker:static/js/stalker.js") }}'>
  </script>
  <script type='text/javascript'
          src='{{ request.static_url("stalker:static/js/stalker.js") }}'>
  </script>
</head>
<body class='claro' style='border-radius: 10px'>
{% block body %}
  <div id='appLayout' class='demoLayout'>
    <div id='header' class='edgePanel' style="overflow: hidden">
      {% block header %}
        <div id='stalker_logo'>
          Stalker <span style='font-size: 12px;'>v{{stalker.__version__}}</span>
        </div>
        
        <div id='projects_menu'>
          <span>Projects</span>
          <div id='expand_project_icon'
               style='
                 background-image: url({{ request.static_url('stalker:static/images/gmail_icons.png') }});
                 background-position: -240px 0;
                 font-size: 0;
                 line-height: 0;
                 height: 8px;
                 width: 8px;
                 position: relative;
                 left: 48px;
                 top: -10px;'>
          </div>
        </div>
        
        <div id='mebar'>
          <span>{{user.name}}</span>
          <div id='expand_icon'
               style='
                 background-image: url({{ request.static_url('stalker:static/images/gmail_icons.png') }});
                 background-position: -240px 0;
                 font-size: 0;
                 line-height: 0;
                 height: 8px;
                 width: 8px;
                 position: relative;
                 left: 39px;
                 top: -10px;'>
          </div>
        </div>
      {% endblock %}
    </div>
    <div id='central_content' class='centralPanel'>
      {% block content %}
        <div id='main_view'>
          <div id='top_menu'>
          </div>
          {% block main_view %}{% endblock %}
        </div>
      {% endblock %}
    </div>

    <div id='footer' class='edgePanel'>
      {% block footer %}
        <div class='footer'>&copy; Copyright 2008-2012, Erkan Ozgur Yilmaz.</div>
      {% endblock %}
    </div>
  </div>
{% endblock %}
  <script type='text/javascript'>
    require(['dojo/dom', 'dijit/registry', 'dijit/layout/BorderContainer',
      'dijit/layout/TabContainer', 'dijit/layout/SplitContainer',
      'dojox/layout/ContentPane', 'dijit/TooltipDialog', 'dijit/popup',
      'dojo/on', 'dojo/domReady!'],
        function(dom, registry, BorderContainer, TabContainer,
                 SplitContainer, ContentPane, TooltipDialog, popup, on){
          
          // create the BorderContainer and attach it to our appLayout div
          var appLayout = new BorderContainer({
            design: 'headline',
            style: 'padding: 0px',
            splitter: true,
            gutters: false
          }, 'appLayout');
          
          // create the Header
          appLayout.addChild(
            new ContentPane({
              region: 'top',
              style: 'height: 24px; padding: 0px;'
            }, 'header')
          );
          
          // create Footer
          appLayout.addChild(
            new ContentPane({
              region: 'bottom',
              style: 'height: 14px; padding: 0px'
            }, 'footer')
          );
          
          // projects_bar
          var projects_menu_tooltipDialog = new TooltipDialog({
            id: 'projects_menu_tooltipDialog',
            style: 'width: 250px;',
            href: '/projects_menu',
            executeScripts: true,
            onMouseLeave: function(){
              popup.close(projects_menu_tooltipDialog);
            }
          });
          
          // attach the TooltipDialog to our projects_bar
          on(dojo.byId('projects_menu'), 'click', function(){
            
            // refresh the projects_menu_tooltipDialog content
            projects_menu_tooltipDialog.refresh();
            
            popup.open({
              popup: projects_menu_tooltipDialog,
              around: dom.byId('projects_menu')
            });
          });
          
          // mebar
          var mebar_tooltipDialog = new TooltipDialog({
            id: 'mebar_tooltipDialog',
            style: 'width: 250px; height: 100%',
            href: '/me_menu',
            onMouseLeave: function(){
              mebar_tooltipDialog.set('visible', false);
              popup.close(mebar_tooltipDialog);
            }
          });
          mebar_tooltipDialog.startup();
          
          // attach the TooltipDialog to our mebar
          on(dojo.byId('mebar'), 'click', function(){
            
            if (mebar_tooltipDialog.get('visible')){
              mebar_tooltipDialog.set('visible', false);
              popup.close(mebar_tooltipDialog);
            } else {
              mebar_tooltipDialog.set('visible', true);
              popup.open({
                popup: mebar_tooltipDialog,
                around: dom.byId('mebar')
              }); 
            }
          });
          
         
          
          // create main content
          appLayout.addChild(
            new ContentPane({
              region: 'center',
              style: 'padding: 0px'
            }, 'central_content')
          );
          
          appLayout.startup();
          
        });
  </script>
</body>
</html>
