<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    {% if entity %}
        <title>STALKER / {{ entity.name }}</title>
    {% else %}
        <title>Stalker Pyramid</title>
    {% endif %}

    {#    <meta name="description" content="with draggable and editable events"/>#}

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    {# special case for doT it needs to be the very first script to let Gantt Chart view #}
{#    <script src='{{ request.static_url("stalker_pyramid:static/node_modules/doT/doT.min.js") }}'></script>#}

    <script src='{{ request.static_url("stalker_pyramid:static/js/stalker.js") }}'></script>


    {# PRE-HEADER #}
    {% block pre_header %}
    {% endblock pre_header %}

{#    <link rel="stylesheet" href='{{ request.static_url("stalker_pyramid:static/css/main.css") }}'/>#}

    <style>
        {# TODO: Please move these styles in to the appropriate less/css file #}
        .spinner-preview {
            width: 100px;
            height: 100px;
            text-align: center;
            margin-top: 100px;
        }

        .dropdown-preview {
            margin: 0 5px;
            display: inline-block;
        }

        .dropdown-preview  > .dropdown-menu {
            display: block;
            position: static;
            margin-bottom: 5px;
        }

        .modal-body {
            max-height: 90% {# 650px #};
        }

        {# fix for autocomplete and jquery-ui#}
        .ui-front {
            z-index: 1100;
        }

        .daterangepicker.dropdown-menu {
            z-index: 1100;

        }
    </style>


    {# POST-HEADER #}
    {% block post_header %}
    {% endblock post_header %}

    <!--ace settings handler-->

    {# TEMPLATES #}
    {% block templates %}
    {% endblock templates %}

</head>

<body class="navbar-fixed breadcrumbs-fixed skin-1">

<script id="tmpl_flash_message" type="text/x-messages">
    {% for message in request.session.pop_flash() %}
        {% set message_type=message.split(':')[0] %}
        {% set message_content=message.split(':')[1] %}
        <div type='{{ message_type }}' title='{{ message_type.title() }}!'>
            {{ message_content|safe }}
        </div>
    {% endfor %}
</script>


{% raw %}
<script id="tmpl_sidebar_media" type="text/x-dot-template">
    <li>
        <div class="media">
            <a class="pull-left"
               href="#"
               style="text-align: center; overflow: hidden; width: 100px">
                <img id="sidebar_avatar"
                     style="height: auto; width: 100%; max-width: none;
                      position: relative; left: 100%; margin-left: -200%"
                     class="img-thumbnail"
                     src={{=it.thumbnail_full_path}}>
            </a>

            <div class="media-body">
                <h5 class="media-heading"><span style='color: #b1bac1;'>{{=it.name}}</span>
                    <small>{{=it.code}}</small>
                </h5>
                {{ if (it.update_link) { }}
                    <a href={{=it.update_link}}
                       {{ if (it.modal_view) { }}
                        data-target="#dialog_template"
                        data-toggle="modal"
                        data-keyboard=false
                       {{ } }}
                       class="menu-text">
                        <i class="icon-edit"></i>
                        Update
                    </a>
                {{ } }}
            </div>
        </div>
    </li>
</script>
{% endraw %}

{% raw %}
<script id="tmpl_sidebar_tree_link" type="text/x-dot-template">
    <li>
        <a href="#" class="dropdown-toggle">
            <i class={{=it.icon}}></i>
            <span class="menu-text">{{=it.title}} </span>

            <b class="arrow icon-angle-down"></b>
        </a>

        <ul id='{{=it.title}}_sublink' class="submenu">

        </ul>
    </li>

</script>
{% endraw %}

{% raw %}
<script id="tmpl_sidebar_tree_sublink" type="text/x-dot-template">

    <li class="{{=it.state}}">
        <a href={{=it.link}}>
            <i class="icon-double-angle-right"></i>
            {{=it.name }}
        </a>
    </li>

</script>
{% endraw %}

{% raw %}
<script id="tmpl_sidebar_link" type="text/x-dot-template">
    <li class={{=it.state}}>
        <a href={{=it.link}}>
            <i class={{=it.icon}}></i>
            <span class="menu-text">{{=it.title}}</span>
            {{ if (it.count !== 'no_badge') { }}
            <span id="{{=it.title }}_count"
                  class="badge {{ if (it.count > 0) { }}badge-important{{ } else { }}badge-success{{ } }}">{{=it.count}}</span>
            {{ } }}
        </a>
    </li>
</script>
{% endraw %}

{% raw %}
<script id="tmpl_pillsbar_link" type="text/x-dot-template">
    <li class="{{=it.state}}" link={{=it.link}}>
        <a data-toggle="tab" href="" >
            <i class={{=it.icon}}></i>
            <span class="menu-text">{{=it.title}}</span>
            {{ if (it.count !== 'no_badge') { }}
            <span id="{{=it.title }}_count"
                  class="badge {{ if (it.count > 0) { }}badge-important{{ } else { }}badge-success{{ } }}">{{=it.count}}</span>
            {{ } }}
        </a>
    </li>
</script>
{% endraw %}

{# CONTENT #}
{% block content %}

    {# NAV-BAR #}
    {% block navbar %}
        {% include 'navbar.jinja2' %}
    {% endblock navbar %}

    <div class="main-container container-fluid">

        {# MAIN-CONTAINER #}
        {% block main_container %}

            {# SIDEBAR #}
            {% block sidebar %}
            {% endblock sidebar %}

            {# MAIN-CONTENT #}
            {% block main_content %}
                <div class="main-content">

                    {# BREADCRUMBS #}
                    {% block breadcrumbs %}
                    {% endblock breadcrumbs %}


                    <div class='page-content'>

                        {# PAGE-CONTENT #}
                        {% block page_content %}
                        {% endblock page_content %}

                    </div>

                </div>
            {% endblock main_content %}

        {% endblock main_container %}
    </div>
{% endblock content %}

{# MODALS #}
{% block modals %}
    {% include 'modals/html_template.jinja2' %}
    {% include 'modals/dialog_template.jinja2' %}
{% endblock modals %}

{# SCRIPTS #}
{% block scripts %}
{% endblock scripts %}

{# EXTRA-SCRIPTS #}
{% block extrascripts %}
{% endblock extrascripts %}

</body>
</html>
