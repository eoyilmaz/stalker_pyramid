<div style="margin: 0" id='task_border_container'>
    <div id='task_nav_bar_content_pane'>
        {# Summary View #}
    </div>
    <div id='ptask_related_data_tab_container'>
        {# Tab View #}
    </div>
</div>

<script type='text/javascript'>
    require(['dijit/registry', 'dijit/layout/BorderContainer',
        'dijit/layout/TabContainer', 'dojox/layout/ContentPane', 'dojo/domReady!'],
            function (registry, BorderContainer, TabContainer, ContentPane) {

                var task_BorderContainer = new BorderContainer({
                    id: 'task_border_container',
                    region: 'center',
                    orientation: 'vertical',
                    splitter: true,
                    resizable: false,
                    style: 'width:100%; height:100%; margin:0;'
                }, 'task_border_container');


                var nav_bar_content_pane = new ContentPane({
                    title: 'NavBar',
                    href: '{{ request.route_url('view_entity_nav_bar', id=entity.id) }}',
                    region: 'top',
                    style: 'width:100%; height:25px; padding: 0;'
                }, 'task_nav_bar_content_pane');


                // **********************************************************************
                // Bottom Part - Complex Data View
                var task_related_data_tab_container = new TabContainer({
                    region: 'center',
                    style: 'padding: 0; margin:0;'
                }, 'task_related_data_tab_container');

                {% if has_permission('List_Task') %}

                    var tasks_content_pane = new ContentPane({
                        title: 'Tasks',
                        href: '{{ request.route_url('list_task_tasks', id=entity.id) }}',
                        style: 'width: 100%;'
                    });
                    task_related_data_tab_container.addChild(tasks_content_pane);

                {% endif %}


                {% if has_permission('List_TimeLog') %}

                    var time_logs_content_pane = new ContentPane({
                        title: 'TimeLogs',
                        href: '{{ request.route_url('list_task_time_logs', id=entity.id) }}',
                        style: 'padding: 0; margin:0;'
                    });
                    task_related_data_tab_container.addChild(time_logs_content_pane);

                {% endif %}

                {% if has_permission('List_Version') %}

                    var versions_content_pane = new ContentPane({
                        title: 'Versions',
                        href: '{{ request.route_url('list_task_versions', id=entity.id) }}'
                    });
                    task_related_data_tab_container.addChild(versions_content_pane);

                {% endif %}

                {% if has_permission('List_Ticket') %}

                    var tickets_content_pane = new ContentPane({
                        title: 'Tickets',
                        href: '{{ request.route_url('list_task_tickets', id=entity.id) }}'
                    });
                    task_related_data_tab_container.addChild(tickets_content_pane);

                {% endif %}
            
                {# List References#}
                var references_content_pane = new ContentPane({
                    title: 'References',
                    href: '{{ request.route_url('list_entity_references', id=entity.id) }}',
                    style: 'width: 100%;'
                });
                task_related_data_tab_container.addChild(references_content_pane);
                {# End List References #}

                 var summary_content_pane = new ContentPane({
                    title: 'Overview',
                    href: '{{ request.route_url('summarize_task', id=entity.id) }}',
                    style: 'padding: 0; margin:0;'
                });
                task_related_data_tab_container.addChild(summary_content_pane);

                task_related_data_tab_container.startup();

                task_BorderContainer.addChild(nav_bar_content_pane);
                task_BorderContainer.addChild(task_related_data_tab_container);
                task_BorderContainer.startup();

            });
</script>
